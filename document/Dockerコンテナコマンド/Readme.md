# Dockerコンテナの実行
## `docker container run イメージ名[:タグ名]`
- example/echo:latestイメージをコンテナとして実行するコマンド。これだとずっとフォアグラウンド（ターミナル上で）動き続けてしまう。コンテナの実行を終了したい場合はCtrl+cでOK。
- **-dオプション**
	- バックグラウンドでコンテナを実行させることが可能。
	- 実行するとコンテナIDが表示される。
- **-pオプション**
	- ポートフォワーディング。外からのリクエストなどを受け入れるポート番号を指定できる。
- **--nameオプション**
	- 名前付きコンテナの作成。指定しなかった場合は適当な単語で作られた名前が自動的につけられる。
	- コンテナの停止などの制御コマンドを実行する際にコンテナIDかコンテナ名を指定する必要がある。しかしコンテナIDもコンテナ名もコンテナを実行して初めて知ることができる。したがって名前付きコンテナを作成することをお勧めする。
- **-i, -itオプション**
	- docker起動後にコンテナ側の標準入力をつなぎっぱなしにする。シェルに入ってコマンド実行などができるようになる。-tオプションによって疑似端末を有効にするため、-itオプションによって疑似端末にシェルコマンドを入力できるようにすることが多い。
- **--rmオプション**
	- コンテナ終了時にコンテナを破棄する。一回走らせればその後保持しておく必要がないコマンドラインツールなどの実行時に適している。
- **-vオプション**
	- ホストとコンテナ間でディレクトリ、ファイルを共有するときに使う。
## `docker container ls [options]`
- 実行中のコンテナの一覧表示。
- **-qオプション**
	- コンテナID（省略形）だけを抽出するオプション。
- **--filterオプション**
	- `docker container ls --filter "filter名=値"`
	- 一覧表示の結果で特定の条件に一致するものだけを抽出する。
	- 例　コンテナ名で抽出）
		- `docker container ls -- filter "name=echo1"`
- **-aオプション**
	- 終了したコンテナも含めたコンテナの一覧を取得できる。終了したコンテナの実行時の標準出力を参照したり、再実行するようなケースで利用される。
- 一覧表示内容

| 項目         | 内容                                                             |
| ------------ | ---------------------------------------------------------------- |
| CONTAINER ID | コンテナに付与される一意のID                                     |
| IMAGE        | コンテナ作成に使用されたDockerイメージ                           |
| COMMAND      | コンテナで実行されているアプリケーションのプロセス               |
| CREATED      | コンテナが作成されてから経過した時間                             |
| STATUS       | Up（実行中）、Exited（終了）といったコンテナの実行状態           |
| PORTS        | ホストのポートとコンテナポートの紐付け（ポートフォワーディング） |
| NAMES        | コンテナにつけられた名前                                         |

## `docker container stop コンテナIDまたはコンテナ名`
- 実行しているコンテナを終了する。
## `docker container restart コンテナIDまたはコンテナ名`
- 一度停止したコンテナを再実行する。破棄したコンテナは再実行できない。
## `docker container rm コンテナIDまたはコンテナ名`
- 停止したコンテナをディスクから完全に破棄するコマンド。実行中のコンテナは破棄できない。
- **-fオプション**
	- 実行中のコンテナに対しても強制的に破棄することができる。
## `docker container logs [options] コンテナIDまたはコンテナ名`
- 実行している特定のDockerコンテナの標準出力を表示することができる。
- **-fオプション**
	- 標準出力の取得をし続ける。
	- 毎秒出力するものなどに有効。
## `docker container exec [options] コンテナIDまたはコンテナ名 コンテナ内で実行するコマンド`
- 実行しているDockerコンテナの中で任意のコマンドを実行する。
- 例）
	- `docker container exec -it echo pwd`
		- echoコンテナでカレントディレクトリまでのパスを表示する。
- コンテナ内の状態確認やデバッグ用途で利用されることが多い。
- コンテナ内のファイルを変更したりするような利用はアプリケーションに意図しない副作用をもたらす可能性もあるため、本番環境での利用は極力避けるべき。

## `docker container cp [options] コンテナIDまたはコンテナ名：コンテナ内のコピー元 ホストのコピー先（コンテナ内のコピー先）`
- コンテナ間、コンテナ・ホスト間でファイルをコピーできる。DockerfileのCOPYインストラクションはイメージのビルド時にホストからファイルをコピーするために実行されるものだが、docker container cpは実行中のコンテナ間でのファイルのやりとりのコマンドである。

## `docker container prune [options]`
- 不要なイメージやコンテナを一括で削除できる。基本的には実行中のコンテナは削除できない。
- `docker image prune`を実行することによってイメージも一括削除することができる。
- `docker system prune`を実行すると利用されていないDockerコンテナやイメージ、ボリューム、ネットワークといった全てのDockerリソースを一括で削除する。

## `docker container stats [options] [表示するコンテナID…]`
- コンテナ単位でのシステムリソースの利用状況を表示する。

	